{% extends "base.html" %}

{% block content %}
<div class="add-app-page">
    <!-- Header -->
    <header class="page-header">
        <div class="header-content">
            <a href="{{ url_for('dashboard') }}" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
            <h1><i class="fas fa-plus-circle"></i> Add New App</h1>
            <p class="page-subtitle">Connect a new platform to track metrics</p>
        </div>
    </header>
    
    <div class="add-app-content">
        <!-- Form Section -->
        <div class="form-section">
            <div class="form-card">
                <h2><i class="fas fa-link"></i> Connect New Platform</h2>
                <p class="form-description">Fill in the details to add a new app connection</p>
                
                <form method="POST" action="{{ url_for('add_app') }}" class="app-form" id="addAppForm">
                    <div class="form-group">
                        <label for="app_name">
                            <i class="fas fa-tag"></i> App Name
                        </label>
                        <input type="text" id="app_name" name="app_name" 
                               placeholder="e.g., My YouTube Channel" required
                               class="form-control"
                               pattern=".{3,50}"
                               title="App name must be between 3 and 50 characters">
                        <small class="form-text">Give this connection a friendly name (3-50 characters)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="platform">
                            <i class="fas fa-plug"></i> Platform Type
                        </label>
                        <select id="platform" name="platform" required class="form-control">
                            <option value="">Select a platform...</option>
                            <optgroup label="Writing & Creative">
                                <option value="wattpad">Wattpad</option>
                                <option value="pinterest">Pinterest</option>
                                <option value="pixiv">Pixiv</option>
                                <option value="tiktok">TikTok</option>
                                <option value="youtube">YouTube</option>
                                <option value="bandlab">BandLab</option>
                                <option value="spotify">Spotify</option>
                            </optgroup>
                            <optgroup label="Coding & Tech">
                                <option value="github">GitHub</option>
                                <option value="vercel">Vercel</option>
                            </optgroup>
                            <optgroup label="Student / Work">
                                <option value="google_classroom">Google Classroom</option>
                                <option value="studypool">Studypool</option>
                                <option value="linkedin">LinkedIn</option>
                            </optgroup>
                            <optgroup label="Finance & Productivity">
                                <option value="cashew">Cashew</option>
                                <option value="gcash">GCash</option>
                                <option value="western_union">Western Union</option>
                                <option value="maribank">MariBank</option>
                                <option value="shopee">Shopee</option>
                                <option value="lazada">Lazada</option>
                                <option value="myfitnesspal">MyFitnessPal</option>
                            </optgroup>
                            <optgroup label="Skills & Hobbies">
                                <option value="talkpal">Talkpal</option>
                                <option value="cstimer">csTimer</option>
                                <option value="chess">Chess.com</option>
                                <option value="lichess">Lichess</option>
                            </optgroup>
                        </select>
                        <small class="form-text">Choose the platform you want to connect to</small>
                    </div>
                    
                    <!-- Profile URL field -->
                    <div class="form-group" id="profileUrlGroup">
                        <label for="profile_url">
                            <i class="fas fa-link"></i> Profile URL (Optional)
                        </label>
                        <input type="url" id="profile_url" name="profile_url" 
                               placeholder="https://youtube.com/@yourchannel"
                               class="form-control">
                        <small class="form-text">
                            Enter your public profile link. We'll track public metrics from this URL.
                            <span id="urlHelp" style="display: none;">Required for this platform.</span>
                        </small>
                    </div>
                    
                    <!-- Show URL examples -->
                    <div class="url-examples" id="urlExamples" style="display: none;">
                        <small><i class="fas fa-info-circle"></i> Example URLs:</small>
                        <div class="example-links">
                            <span class="example-link" id="exampleUrl"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-sync-alt"></i> Sync Frequency
                        </label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="sync_frequency" value="hourly" checked>
                                <span class="radio-custom"></span>
                                <span class="radio-label">
                                    <i class="fas fa-clock"></i> Hourly
                                    <small>Check for updates every hour</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="sync_frequency" value="daily">
                                <span class="radio-custom"></span>
                                <span class="radio-label">
                                    <i class="fas fa-sun"></i> Daily
                                    <small>Sync once per day</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="sync_frequency" value="manual">
                                <span class="radio-custom"></span>
                                <span class="radio-label">
                                    <i class="fas fa-hand-paper"></i> Manual
                                    <small>Only sync when you click refresh</small>
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-shield-alt"></i> Privacy Settings
                        </label>
                        <div class="checkbox-group">
                            <label class="checkbox-option">
                                <input type="checkbox" name="store_metrics" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-label">
                                    Store metrics locally
                                    <small>Keep historical data on your device</small>
                                </span>
                            </label>
                            <label class="checkbox-option">
                                <input type="checkbox" name="generate_notifications" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-label">
                                    Generate notifications
                                    <small>Create AI-powered summaries</small>
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-link"></i> Connect App
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Platform Preview -->
        <div class="preview-section">
            <div class="preview-card">
                <h3><i class="fas fa-eye"></i> Preview</h3>
                <p class="preview-description">See how your app will appear on the dashboard</p>
                
                <div class="app-preview" id="appPreview">
                    <div class="preview-header">
                        <div class="preview-icon">
                            <i class="fas fa-cube" id="previewIcon"></i>
                        </div>
                        <div class="preview-info">
                            <h4 id="previewName">App Name</h4>
                            <span class="preview-platform" id="previewPlatform">Platform</span>
                        </div>
                        <div class="preview-status">
                            <span class="status-badge status-pending">
                                <i class="fas fa-clock"></i> Pending
                            </span>
                        </div>
                    </div>
                    
                    <div class="preview-metrics">
                        <div class="preview-metric">
                            <span class="metric-label">Sample Metric</span>
                            <span class="metric-value">0</span>
                        </div>
                        <div class="preview-metric">
                            <span class="metric-label">Another Metric</span>
                            <span class="metric-value">0</span>
                        </div>
                    </div>
                    
                    <div class="preview-footer">
                        <span><i class="fas fa-history"></i> Last sync: Never</span>
                    </div>
                </div>
                
                <div class="preview-features">
                    <h4><i class="fas fa-star"></i> What you'll get:</h4>
                    <ul class="features-list">
                        <li><i class="fas fa-check-circle"></i> Real-time metrics tracking</li>
                        <li><i class="fas fa-check-circle"></i> AI-powered notifications</li>
                        <li><i class="fas fa-check-circle"></i> Historical data storage</li>
                        <li><i class="fas fa-check-circle"></i> One-click sync capability</li>
                        <li><i class="fas fa-check-circle"></i> Local data privacy</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Popular Platforms -->
    <section class="popular-platforms">
        <h2><i class="fas fa-fire"></i> Popular Platforms</h2>
        <p class="section-description">Quick connect to these commonly used platforms</p>
        
        <div class="platforms-grid">
            <!-- Writing & Creative -->
            <div class="platform-card" data-platform="github">
                <div class="platform-icon">
                    <i class="fab fa-github"></i>
                </div>
                <h4>GitHub</h4>
                <p>Track commits, repos, and PRs</p>
                <button type="button" class="btn-platform-connect" data-platform="github">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <div class="platform-card" data-platform="youtube">
                <div class="platform-icon">
                    <i class="fab fa-youtube"></i>
                </div>
                <h4>YouTube</h4>
                <p>Monitor views and subscribers</p>
                <button type="button" class="btn-platform-connect" data-platform="youtube">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <div class="platform-card" data-platform="spotify">
                <div class="platform-icon">
                    <i class="fab fa-spotify"></i>
                </div>
                <h4>Spotify</h4>
                <p>Track listens and playlists</p>
                <button type="button" class="btn-platform-connect" data-platform="spotify">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <!-- Finance -->
            <div class="platform-card" data-platform="cashew">
                <div class="platform-icon">
                    <i class="fas fa-wallet"></i>
                </div>
                <h4>Cashew</h4>
                <p>Monitor savings and finances</p>
                <button type="button" class="btn-platform-connect" data-platform="cashew">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <div class="platform-card" data-platform="shopee">
                <div class="platform-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <h4>Shopee</h4>
                <p>Track orders and earnings</p>
                <button type="button" class="btn-platform-connect" data-platform="shopee">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <!-- Productivity -->
            <div class="platform-card" data-platform="myfitnesspal">
                <div class="platform-icon">
                    <i class="fas fa-dumbbell"></i>
                </div>
                <h4>MyFitnessPal</h4>
                <p>Track workouts and calories</p>
                <button type="button" class="btn-platform-connect" data-platform="myfitnesspal">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <div class="platform-card" data-platform="chess">
                <div class="platform-icon">
                    <i class="fas fa-chess"></i>
                </div>
                <h4>Chess.com</h4>
                <p>Monitor rating and games</p>
                <button type="button" class="btn-platform-connect" data-platform="chess">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
            
            <div class="platform-card" data-platform="linkedin">
                <div class="platform-icon">
                    <i class="fab fa-linkedin"></i>
                </div>
                <h4>LinkedIn</h4>
                <p>Track profile views and jobs</p>
                <button type="button" class="btn-platform-connect" data-platform="linkedin">
                    <i class="fas fa-plus"></i> Quick Add
                </button>
            </div>
        </div>
    </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const platformSelect = document.getElementById('platform');
    const appNameInput = document.getElementById('app_name');
    const profileUrlInput = document.getElementById('profile_url');
    const profileUrlGroup = document.getElementById('profileUrlGroup');
    const urlExamples = document.getElementById('urlExamples');
    const urlHelp = document.getElementById('urlHelp');
    const exampleUrl = document.getElementById('exampleUrl');
    
    const previewName = document.getElementById('previewName');
    const previewPlatform = document.getElementById('previewPlatform');
    const previewIcon = document.getElementById('previewIcon');
    
    // Platform configuration
    const platformConfig = {
        'youtube': {
            icon: 'fab fa-youtube',
            example: 'https://youtube.com/@username',
            color: '#FF0000',
            requiresUrl: true
        },
        'github': {
            icon: 'fab fa-github',
            example: 'https://github.com/username',
            color: '#333',
            requiresUrl: true
        },
        'tiktok': {
            icon: 'fab fa-tiktok',
            example: 'https://tiktok.com/@username',
            color: '#000000',
            requiresUrl: true
        },
        'chess': {
            icon: 'fas fa-chess',
            example: 'https://chess.com/member/username',
            color: '#779952',
            requiresUrl: true
        },
        'lichess': {
            icon: 'fas fa-chess-board',
            example: 'https://lichess.org/@/username',
            color: '#B58863',
            requiresUrl: true
        },
        'spotify': {
            icon: 'fab fa-spotify',
            example: 'https://open.spotify.com/user/username',
            color: '#1DB954',
            requiresUrl: false
        },
        'linkedin': {
            icon: 'fab fa-linkedin',
            example: 'https://linkedin.com/in/username',
            color: '#0077B5',
            requiresUrl: false
        },
        'pinterest': {
            icon: 'fab fa-pinterest',
            example: 'https://pinterest.com/username',
            color: '#E60023',
            requiresUrl: false
        },
        'default': {
            icon: 'fas fa-cube',
            example: 'https://example.com/username',
            color: '#3b82f6',
            requiresUrl: false
        }
    };
    
    // Handle platform selection change
    platformSelect.addEventListener('change', function() {
        const selectedValue = this.value;
        updateFormForPlatform(selectedValue);
        updatePreview(selectedValue);
    });
    
    // Handle app name input
    appNameInput.addEventListener('input', function() {
        if (this.value.trim()) {
            previewName.textContent = this.value;
        } else {
            previewName.textContent = 'App Name';
        }
    });
    
    // Handle profile URL input
    profileUrlInput.addEventListener('input', function() {
        if (this.value.trim()) {
            // Validate URL format
            if (!this.value.startsWith('http://') && !this.value.startsWith('https://')) {
                this.value = 'https://' + this.value;
            }
        }
    });
    
    // Handle quick connect buttons
    document.querySelectorAll('.btn-platform-connect').forEach(button => {
        button.addEventListener('click', function() {
            const platform = this.dataset.platform;
            
            // Set platform select
            platformSelect.value = platform;
            
            // Update form and preview
            updateFormForPlatform(platform);
            updatePreview(platform);
            
            // Generate suggested app name
            const platformName = this.closest('.platform-card').querySelector('h4').textContent;
            const suggestedName = `My ${platformName} Account`;
            appNameInput.value = suggestedName;
            previewName.textContent = suggestedName;
            
            // Show success message
            showToast(`Ready to connect ${platformName}! Fill in your profile URL and click "Connect App"`, 'success');
            
            // Scroll to form
            document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
        });
    });
    
    // Form validation
    document.getElementById('addAppForm').addEventListener('submit', function(e) {
        const appName = appNameInput.value.trim();
        const platform = platformSelect.value;
        const profileUrl = profileUrlInput.value.trim();
        
        if (!appName) {
            e.preventDefault();
            showToast('Please enter an app name', 'error');
            appNameInput.focus();
            return;
        }
        
        if (appName.length < 3 || appName.length > 50) {
            e.preventDefault();
            showToast('App name must be between 3 and 50 characters', 'error');
            appNameInput.focus();
            return;
        }
        
        if (!platform) {
            e.preventDefault();
            showToast('Please select a platform', 'error');
            platformSelect.focus();
            return;
        }
        
        // Check if URL is required
        const config = platformConfig[platform] || platformConfig.default;
        if (config.requiresUrl && !profileUrl) {
            e.preventDefault();
            showToast(`${platform.charAt(0).toUpperCase() + platform.slice(1)} requires a profile URL`, 'error');
            profileUrlInput.focus();
            return;
        }
        
        // Validate URL if provided
        if (profileUrl) {
            try {
                new URL(profileUrl);
            } catch {
                e.preventDefault();
                showToast('Please enter a valid URL (include http:// or https://)', 'error');
                profileUrlInput.focus();
                return;
            }
        }
        
        // Show loading
        showLoading();
    });
    
    // Update form for selected platform
    function updateFormForPlatform(platform) {
        const config = platformConfig[platform] || platformConfig.default;
        
        // Show/hide URL field
        if (platform && config.requiresUrl) {
            profileUrlGroup.style.display = 'block';
            urlExamples.style.display = 'block';
            urlHelp.style.display = 'inline';
            profileUrlInput.placeholder = config.example;
            exampleUrl.textContent = config.example;
        } else {
            profileUrlGroup.style.display = 'block';
            urlExamples.style.display = 'none';
            urlHelp.style.display = 'none';
            profileUrlInput.placeholder = 'https://example.com/username (Optional)';
        }
    }
    
    // Update preview
    function updatePreview(platform) {
        const config = platformConfig[platform] || platformConfig.default;
        
        previewPlatform.textContent = platform.charAt(0).toUpperCase() + platform.slice(1);
        previewIcon.className = config.icon;
        
        // Update icon color
        const previewIconEl = document.querySelector('.preview-icon');
        previewIconEl.style.background = `linear-gradient(135deg, ${config.color}, ${adjustColor(config.color, -20)})`;
        
        // Update preview URL
        if (config.example) {
            profileUrlInput.placeholder = config.example;
        }
    }
    
    // Helper function to adjust color brightness
    function adjustColor(color, amount) {
        let usePound = false;
        if (color[0] === "#") {
            color = color.slice(1);
            usePound = true;
        }
        
        const num = parseInt(color, 16);
        let r = (num >> 16) + amount;
        let g = ((num >> 8) & 0x00FF) + amount;
        let b = (num & 0x0000FF) + amount;
        
        r = Math.min(Math.max(0, r), 255);
        g = Math.min(Math.max(0, g), 255);
        b = Math.min(Math.max(0, b), 255);
        
        return (usePound ? "#" : "") + (b | (g << 8) | (r << 16)).toString(16).padStart(6, '0');
    }
    
    // Toast function
    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
            <span>${message}</span>
        `;
        
        document.body.appendChild(toast);
        
        setTimeout(() => toast.classList.add('show'), 10);
        
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }
    
    // Loading function
    function showLoading() {
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (loadingOverlay) {
            loadingOverlay.style.display = 'flex';
        }
    }
    
    // Initialize with default state
    updateFormForPlatform('');
    updatePreview('');
});
</script>

<style>
.add-app-page {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.page-header {
    margin-bottom: 30px;
}

.header-content {
    text-align: center;
    position: relative;
}

.btn-back {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--text-secondary);
    text-decoration: none;
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
    font-size: 14px;
}

.btn-back:hover {
    background: var(--border);
    color: var(--text-primary);
}

.page-header h1 {
    margin: 0 0 10px 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    color: var(--text-primary);
    font-size: 28px;
}

.page-subtitle {
    color: var(--text-secondary);
    margin: 0;
    font-size: 16px;
}

.add-app-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 50px;
}

@media (max-width: 900px) {
    .add-app-content {
        grid-template-columns: 1fr;
    }
}

.form-section, .preview-section {
    flex: 1;
}

.form-card, .preview-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: 30px;
    border: 1px solid var(--border);
    box-shadow: var(--card-shadow);
}

.form-card h2, .preview-card h3 {
    margin: 0 0 10px 0;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
}

.form-description, .preview-description {
    color: var(--text-secondary);
    margin: 0 0 25px 0;
    font-size: 14px;
}

.app-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.form-control {
    width: 100%;
    padding: 12px 16px;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 16px;
    transition: all 0.2s;
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-control:invalid {
    border-color: var(--accent-danger);
}

.form-text {
    display: block;
    margin-top: 6px;
    color: var(--text-secondary);
    font-size: 13px;
    line-height: 1.4;
}

/* URL Examples */
.url-examples {
    margin-top: 10px;
    padding: 12px;
    background: rgba(59, 130, 246, 0.05);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-primary);
}

.url-examples small {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--text-secondary);
    margin-bottom: 5px;
}

.example-links {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.example-link {
    font-family: 'Courier New', monospace;
    font-size: 13px;
    color: var(--accent-primary);
    padding: 4px 8px;
    background: var(--bg-primary);
    border-radius: 4px;
    border: 1px solid var(--border);
    word-break: break-all;
}

/* Radio and Checkbox Groups */
.radio-group, .checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.radio-option, .checkbox-option {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    cursor: pointer;
    padding: 12px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    transition: all 0.2s;
}

.radio-option:hover, .checkbox-option:hover {
    background: rgba(59, 130, 246, 0.05);
    border-color: var(--accent-primary);
}

.radio-option input, .checkbox-option input {
    display: none;
}

.radio-custom, .checkbox-custom {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border);
    border-radius: 50%;
    position: relative;
    flex-shrink: 0;
    margin-top: 2px;
    transition: all 0.2s;
}

.checkbox-custom {
    border-radius: 4px;
}

.radio-option input:checked + .radio-custom,
.checkbox-option input:checked + .checkbox-custom {
    border-color: var(--accent-primary);
    background: var(--accent-primary);
}

.radio-option input:checked + .radio-custom::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
}

.checkbox-option input:checked + .checkbox-custom::after {
    content: 'âœ“';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.radio-label, .checkbox-label {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.radio-label i, .checkbox-label i {
    color: var(--accent-primary);
    margin-right: 5px;
}

.radio-label small, .checkbox-label small {
    color: var(--text-secondary);
    font-size: 12px;
    line-height: 1.4;
}

.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 20px;
}

.btn-lg {
    padding: 14px 28px;
    font-size: 16px;
    flex: 1;
}

.btn-secondary {
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

.btn-secondary:hover {
    background: var(--border);
}

/* Preview styles */
.app-preview {
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    padding: 20px;
    border: 1px solid var(--border);
    margin-bottom: 25px;
}

.preview-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.preview-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--accent-primary), #8b5cf6);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: white;
    flex-shrink: 0;
    transition: all 0.3s ease;
}

.preview-info {
    flex: 1;
}

.preview-info h4 {
    margin: 0 0 5px 0;
    color: var(--text-primary);
    font-size: 16px;
}

.preview-platform {
    font-size: 12px;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 5px;
}

.preview-status {
    flex-shrink: 0;
}

.preview-metrics {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
}

.preview-metric {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
}

.preview-metric:last-child {
    border-bottom: none;
}

.metric-label {
    font-size: 14px;
    color: var(--text-secondary);
}

.metric-value {
    font-weight: 600;
    color: var(--text-primary);
}

.preview-footer {
    font-size: 12px;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 5px;
}

.preview-features h4 {
    margin: 0 0 15px 0;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
}

.features-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.features-list li {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    color: var(--text-secondary);
    font-size: 14px;
}

.features-list li i {
    color: var(--accent-success);
    margin-top: 2px;
}

/* Popular platforms */
.popular-platforms {
    margin-top: 50px;
}

.popular-platforms h2 {
    text-align: center;
    margin: 0 0 10px 0;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-size: 24px;
}

.section-description {
    text-align: center;
    color: var(--text-secondary);
    margin: 0 0 30px 0;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    font-size: 15px;
}

.platforms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.platform-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: 25px;
    border: 1px solid var(--border);
    text-align: center;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.platform-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--card-shadow);
    border-color: var(--accent-primary);
}

.platform-icon {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    margin-bottom: 15px;
    color: white;
}

.platform-card[data-platform="github"] .platform-icon {
    background: linear-gradient(135deg, #333, #24292e);
}

.platform-card[data-platform="youtube"] .platform-icon {
    background: linear-gradient(135deg, #FF0000, #CC0000);
}

.platform-card[data-platform="spotify"] .platform-icon {
    background: linear-gradient(135deg, #1DB954, #1ed760);
}

.platform-card[data-platform="linkedin"] .platform-icon {
    background: linear-gradient(135deg, #0077B5, #00A0DC);
}

.platform-card[data-platform="cashew"] .platform-icon {
    background: linear-gradient(135deg, #FF6B35, #FF8C42);
}

.platform-card[data-platform="shopee"] .platform-icon {
    background: linear-gradient(135deg, #FF6B00, #FF8C00);
}

.platform-card[data-platform="myfitnesspal"] .platform-icon {
    background: linear-gradient(135deg, #1E90FF, #4169E1);
}

.platform-card[data-platform="chess"] .platform-icon {
    background: linear-gradient(135deg, #779952, #B58863);
}

.platform-card[data-platform="tiktok"] .platform-icon {
    background: linear-gradient(135deg, #000000, #333333);
}

.platform-card h4 {
    margin: 0 0 10px 0;
    color: var(--text-primary);
    font-size: 18px;
}

.platform-card p {
    margin: 0 0 20px 0;
    color: var(--text-secondary);
    font-size: 14px;
    line-height: 1.4;
    flex: 1;
}

.btn-platform-connect {
    width: 100%;
    padding: 10px;
    background: var(--accent-primary);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
}

.btn-platform-connect:hover {
    background: #2563eb;
    transform: translateY(-1px);
}

/* Toast styles */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-left: 4px solid;
    box-shadow: var(--card-shadow);
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 1001;
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s ease;
    max-width: 300px;
}

.toast.show {
    transform: translateX(0);
    opacity: 1;
}

.toast-success {
    border-color: var(--accent-success);
}

.toast-error {
    border-color: var(--accent-danger);
}

.toast-info {
    border-color: var(--accent-info);
}

/* Status badge */
.status-badge {
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.status-pending {
    background: rgba(245, 158, 11, 0.1);
    color: var(--accent-warning);
}

/* Responsive */
@media (max-width: 768px) {
    .btn-back {
        position: static;
        margin-bottom: 15px;
        display: inline-block;
        transform: none;
    }
    
    .page-header h1 {
        font-size: 24px;
    }
    
    .form-card, .preview-card {
        padding: 20px;
    }
    
    .platforms-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 480px) {
    .platforms-grid {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .btn-lg {
        width: 100%;
    }
}
</style>
{% endblock %}